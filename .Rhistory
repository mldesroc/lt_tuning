source("~/.active-rstudio-document")
View(a)
source("~/.active-rstudio-document")
source("~/.active-rstudio-document")
getwd()
here:here()
library(here)
i_am("LT_tuning")
setwd("~/Documents/LT_tuning")
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R")
i_am("LT_tuning")
here()
source("~/Desktop/GTFC/RScripts/Accuracy_Assesment.R")
here()
here:here()
library(fasterize)
library(here)
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R")
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R")
source("~/.active-rstudio-document")
count(UHW_TP = 3)
count(HWF_accuracy_assessment)
?raster
cellStats(HWF_accuracy_assessment)
cellStats(HWF_accuracy_assessment,mean)
HWF_accuracy_assessment
UHW_accuracy_assessment
plot(HWF_accuracy_assessment)
plot(UHW_accuracy_assessment)
plot(HWF_accuracy_assessment)
HWF_accuracy_assessment <- HWF_clip
HWF_accuracy_assessment[!is.na(HWF_accuracy_assesment)] <- NA
HWF_accuracy_assessment[HWF_clip + HWF_harvests ==0] <- 1
HWF_accuracy_assessment[HWF_clip==0 & HWF_harvests >1] <- 2
HWF_accuracy_assessment[HWF_clip>0 & ((abs(HWF_clip - HWF_harvests)) <= 1)] <- 3
HWF_accuracy_assessment[HWF_clip>0 & ((abs(HWF_clip - HWF_harvests)) > 1)] <- 4
HWF_accuracy_assesment <- crop(HWF_accuracy_assessment, shp_HWF_boundary, snap = "out")
HWF_accuracy_assesment <- mask(HWF_accuracy_assessment, shp_HWF_boundary, snap = "out")
UHW_TP <- UHW_clip
UHW_TP[!is.na(UHW_TP)] <- 0
UHW_TP[is.na(UHW_TP)] <- 0
UHW_TP[UHW_accuracy_assessment == 3] <- 3
HWF_TP <- HWF_clip
HWF_TP[!is.na(HWF_TP)] <- 0
HWF_TP[is.na(HWF_TP)] <- 0
HWF_TP[HWF_accuracy_assessment == 3] <- 3
#accuracy metrics
#writeRaster(HWF_accuracy_assesment, "HWF_LT_newest_summary_test", format = 'GTiff')
#writeRaster(UHW_accuracy_assessment, "UHW_LT_newest_summary_test", format = 'GTiff')
#HWF accuracy assessment
HWF_accuracy_assessment <- HWF_clip
HWF_accuracy_assessment[!is.na(HWF_accuracy_assessment)] <- NA
HWF_accuracy_assessment[HWF_clip + HWF_harvests ==0] <- 1
HWF_accuracy_assessment[HWF_clip==0 & HWF_harvests >1] <- 2
HWF_accuracy_assessment[HWF_clip>0 & ((abs(HWF_clip - HWF_harvests)) <= 1)] <- 3
HWF_accuracy_assessment[HWF_clip>0 & ((abs(HWF_clip - HWF_harvests)) > 1)] <- 4
HWF_accuracy_assesment <- crop(HWF_accuracy_assessment, shp_HWF_boundary, snap = "out")
HWF_accuracy_assesment <- mask(HWF_accuracy_assessment, shp_HWF_boundary, snap = "out")
UHW_TP <- UHW_clip
UHW_TP[!is.na(UHW_TP)] <- 0
UHW_TP[is.na(UHW_TP)] <- 0
UHW_TP[UHW_accuracy_assessment == 3] <- 3
HWF_TP <- HWF_clip
HWF_TP[!is.na(HWF_TP)] <- 0
HWF_TP[is.na(HWF_TP)] <- 0
HWF_TP[HWF_accuracy_assessment == 3] <- 3
#accuracy metrics
#writeRaster(HWF_accuracy_assesment, "HWF_LT_newest_summary_test", format = 'GTiff')
#writeRaster(UHW_accuracy_assessment, "UHW_LT_newest_summary_test", format = 'GTiff')
HWF_accuracy_assesment
plot(HWF_accuracy_assesment)
freq(HWF_accuracy_assesment)
freq <- freq(HWF_accuracy_assesment)
freq[1,]
freq[1,2]
freq[2,2]
TP <- freq(HWF_accuracy_assesment, value = 3) + freq(UHW_accuracy_assessment, value = 3)
TP <- freq(HWF_accuracy_assesment, value = 3) + freq(UHW_accuracy_assessment, value = 3)
freq(HWF_accuracy_assesment, value = 3) + freq(UHW_accuracy_assessment, value = 3)
TN <- freq(HWF_accuracy_assesment, value = 1) + freq(UHW_accuracy_assessment, value = 1)
FN <- freq(HWF_accuracy_assesment, value = 2) + freq(UHW_accuracy_assessment, value = 2)
TP <- freq(HWF_accuracy_assesment, value = 3) + freq(UHW_accuracy_assessment, value = 3)
FP <- freq(HWF_accuracy_assesment, value = 4) + freq(UHW_accuracy_assessment, value = 4)
TN <- as.numeric(freq(HWF_accuracy_assesment, value = 1) + freq(UHW_accuracy_assessment, value = 1))
TN <- as.numeric(freq(HWF_accuracy_assesment, value = 1) + freq(UHW_accuracy_assessment, value = 1))
FN <- as.numeric(freq(HWF_accuracy_assesment, value = 2) + freq(UHW_accuracy_assessment, value = 2))
TP <- as.numeric(freq(HWF_accuracy_assesment, value = 3) + freq(UHW_accuracy_assessment, value = 3))
FP <- as.numeric(freq(HWF_accuracy_assesment, value = 4) + freq(UHW_accuracy_assessment, value = 4))
#writeRaster(HWF_accuracy_assesment, "HWF_LT_newest_summary_test", format = 'GTiff')
#writeRaster(UHW_accuracy_assessment, "UHW_LT_newest_summary_test", format = 'GTiff')
recall <- TP/(TP + FP)
precision <- TP/(TP + FN)
F1 <- 2 * (recall * precision)/(recall + precision)
accuracy <- (TP + TN)/(TN + FN + TP + FP)
a <- tibble(
ID=1:11,
Name=NA,
TN=NA,
FN=NA,
TP=NA,
FP=NA,
Recall=NA,
Precision=NA,
F1=NA,
Accuracy=NA
)
View(a)
a[1,1] <- "recoverythreshold_0.75"
a <- tibble(
ID=1:11,
Name,
TN=NA,
FN=NA,
TP=NA,
FP=NA,
Recall=NA,
Precision=NA,
F1=NA,
Accuracy=NA
)
source("~/.active-rstudio-document")
source("~/.active-rstudio-document")
?tibble
source("~/.active-rstudio-document")
View(freq)
a$maxSegments[1,] <- 3
a$maxSegments[1] <- 3
a$vertexCountOvershoot[1] <- 3
a$maxSegments[1] <- 10
a$recoveryThreshold[1] <- .75
a$pvalThreshold[1] <- 0.05
a$bestModelProportion[1] <- 0.75
a$TN <- TN
a$Fn <- FN
a$Tp <- TP
select(a, -Fn)
a <- select(a, -Fn)
a <- select(a, -Tp)
a$FN <- FN
a$TP <- TP
a$FP <- FP
a$Recall <- recall
a$Precision <- precision
a$F1 <- F1
a$Accuracy <- accuracy
write.table(a, "tuning_results")
?rbind
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R")
tuning_results <- read.csv("tuning_results")
rbind(tuningresults, c(10, 3, 0.25, 0.05, 0.75, TN, FN, TP, FP, recall, precision, F1, accuracy))
rbind(tuning_results, c(10, 3, 0.25, 0.05, 0.75, TN, FN, TP, FP, recall, precision, F1, accuracy))
View(tuning_results)
tuning_results <- read.csv("tuning_results")
add_row(tuning_results, c(10, 3, 0.25, 0.05, 0.75, TN, FN, TP, FP, recall, precision, F1, accuracy))
?add_row
tuning_results <- read.csv("tuning_results")
tuning_results <- read.csv("tuning_results", header = TRUE)
write.csv(a, "test.csv"")
write.csv(a, "test.csv")
write.csv(a, "test.csv")
write.csv(a, "tuning_results.csv")
tuning_results <- read.csv("tuning_results", header = TRUE)
tuning_results <- read.csv("tuning_results.csv", header = TRUE)
add_row(tuning_results, maxSegments = 10, vertexCountOvershoot = 3, recoveryThreshold = 0.25, pvalThreshold = 0.05, bestModelProportion = 0.75, TN = TN, FN = FN, TP = TP, FP = FP, Recall = recall,Precision = precision, F1 = F1, Accuracy = accuracy)
tuning_results <- add_row(tuning_results, maxSegments = 10, vertexCountOvershoot = 3, recoveryThreshold = 0.25, pvalThreshold = 0.05, bestModelProportion = 0.75, TN = TN, FN = FN, TP = TP, FP = FP, Recall = recall,Precision = precision, F1 = F1, Accuracy = accuracy)
tuning_results <- select(tuning_results, -X)
?write.csv
?writeRaster()
write.csv(tuning_results, "tuning_results.csv")
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R")
writeRaster(HWF_TP, "HWF_LT_newest_TP_test_2", format = 'GTiff')
writeRaster(UHW_TP, "UHW_LT_newest_TP_test_2", format = 'GTiff')
source("~/Desktop/ERE_530/FinalProject/Hangman_Test.R")
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R")
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R")
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R", echo=TRUE)
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R", echo=TRUE)
?mask
#clip/mask rasters to extent of harvest polygons
UHW_clip <- crop(disturbances, shp_UHW_boundary, snap='out')
UHW_clip <- mask(UHW_clip, shp_UHW_boundary)
HWF_clip <- crop(disturbances, shp_HWF_boundary, snap = 'out')
HWF_clip <- mask(HWF_clip, shp_HWF_boundary, snap = 'out')
UHW_clip[UHW_clip==2020] <- 0
UHW_clip[UHW_clip<2010] <- 0
UHW_clip[UHW_clip<1990] <- 0
HWF_clip[HWF_clip==2020] <- 0
HWF_clip[HWF_clip<1990] <- 0
library(raster)
library(sf)
library(fasterize)
library(here)
#load rasters and shapefiles
shp_HWF_boundary <- st_read("Shapefiles/HWF_Property_Boundary/Property_Boundary.shp")
shp_HWF_harvests <- st_read("Shapefiles/HWF_Recent_Harvests/HWF_Recent_Harvests.shp")
shp_UHW_boundary <- st_read("Shapefiles/UHW_Tracts/UHW_Tracts.shp")
shp_UHW_harvests <- st_read("Shapefiles/UHW_NY_UpperHudson_harvests_FW/NY_UpperHudson_harvests_FW.shp")
disturbances <- raster("rasters/lt_gee_nbr_greatest_tuning_maxsegments_8.tif")
#clip/mask rasters to extent of harvest polygons
UHW_clip <- crop(disturbances, shp_UHW_boundary, snap='out')
UHW_clip <- mask(UHW_clip, shp_UHW_boundary)
HWF_clip <- crop(disturbances, shp_HWF_boundary, snap = 'out')
HWF_clip <- mask(HWF_clip, shp_HWF_boundary, snap = 'out')
UHW_clip[UHW_clip==2020] <- 0
UHW_clip[UHW_clip<2010] <- 0
UHW_clip[UHW_clip<1990] <- 0
HWF_clip[HWF_clip==2020] <- 0
HWF_clip[HWF_clip<1990] <- 0
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R", echo=TRUE)
tuning_results <- read.csv("tuning_results.csv", header = TRUE)
tuning_results <- read.csv("tuning_results.csv", header = TRUE)
tuning_results <- read.csv("tuning_results.csv", header = TRUE)
tuning_results <- read.csv("tuning_results.csv", header = TRUE)
tuning_results <- read.csv("tuning_results.csv", header = TRUE)
View(tuning_results)
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R", echo=TRUE)
?add_row
tuning_results <- add_row(tuning_results, filename = "rasters/lt_gee_nbr_greatest_tuning_maxsegments_8", shortname ="maxSegments_8", maxSegments = 10, vertexCountOvershoot = 3, recoveryThreshold = 0.25, pvalThreshold = 0.05, bestModelProportion = 0.75, TN = TN, FN = FN, TP = TP, FP = FP, Recall = recall,Precision = precision, F1 = F1, Accuracy = accuracy)
tuning_results <- dplyr::add_row(tuning_results, filename = "rasters/lt_gee_nbr_greatest_tuning_maxsegments_8", shortname ="maxSegments_8", maxSegments = 10, vertexCountOvershoot = 3, recoveryThreshold = 0.25, pvalThreshold = 0.05, bestModelProportion = 0.75, TN = TN, FN = FN, TP = TP, FP = FP, Recall = recall,Precision = precision, F1 = F1, Accuracy = accuracy)
tuning_results <- dplyr::add_row(tuning_results, file_name = "rasters/lt_gee_nbr_greatest_tuning_maxsegments_8", short_name ="maxSegments_8", maxSegments = 10, vertexCountOvershoot = 3, recoveryThreshold = 0.25, pvalThreshold = 0.05, bestModelProportion = 0.75, TN = TN, FN = FN, TP = TP, FP = FP, Recall = recall,Precision = precision, F1 = F1, Accuracy = accuracy)
tuning_results$maxSegments[3] <- 8
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R", echo=TRUE)
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R", echo=TRUE)
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R", echo=TRUE)
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R", echo=TRUE)
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R", echo=TRUE)
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R", echo=TRUE)
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R", echo=TRUE)
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R", echo=TRUE)
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R", echo=TRUE)
tuning_results$bestModelProportion[10] <- 1
tuning_results$file_name[10] <- "lt_gee_nbr_greatest_tuning_modelproportion_1"
tuning_results$short_name[10] <- "modelproportion_1"
source("~/Documents/LT_tuning/scripts/Accuracy_Assesment.R", echo=TRUE)
write.csv(tuning_results, "tuning_results.csv")
